DIGEST_TEXT,exec_count,total_time_s,avg_time_s,rows_examined,rows_sent,label_slow
"SELECT `o` . `id` AS `order_id` , `u` . `city` , `p` . `category` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `total` FROM `orders` `o` JOIN `users` `u` ON `o` . `user_id` = `u` . `id` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` GROUP BY `o` . `id` , `u` . `city` , `p` . `category` ORDER BY `total` DESC",10657,365.876689147,0.03433205303059022,220152306,50045272,1
"SELECT `u` . `city` , AVG ( `s` . `duration` ) AS `avg_duration` , COUNT ( * ) AS `nb` FROM `users` `u` JOIN `sessions` `s` ON `u` . `id` = `s` . `user_id` GROUP BY `u` . `city` ORDER BY `avg_duration` DESC",10291,120.610257233,0.011719974466329804,62744227,82328,1
"SELECT `o` . `id` AS `order_id` , `o` . `created_at` , ( SELECT COUNT ( * ) FROM `sessions` `s` WHERE `s` . `user_id` = `o` . `user_id` AND `s` . `created_at` >= `o` . `created_at` - INTERVAL ? SQL_TSI_DAY ) AS `nb_sessions_recent` , `p` . `category` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `total_line` FROM `orders` `o` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` WHERE `o` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY GROUP BY `o` . `id` , `o` . `created_at` , `p` . `category` ORDER BY `nb_sessions_recent` DESC , `total_line` DESC LIMIT ?",1637,113.439736855,0.06929733467012827,45252355,818500,1
"SELECT `u` . `id` AS `user_id` , `u` . `city` , COUNT ( DISTINCTROW `o` . `id` ) AS `nb_orders` , SUM ( `oi` . `quantity` ) AS `total_items` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `total_spent` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` WHERE `o` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY GROUP BY `u` . `id` , `u` . `city` HAVING `total_items` > ? ORDER BY `total_spent` DESC LIMIT ?",4483,97.079003671,0.02165491940017845,74334650,1218279,1
"SELECT `p` . `category` , `p` . `id` AS `product_id` , `p` . `name` , SUM ( `oi` . `quantity` ) AS `qty_sold` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `revenue` FROM `order_items` `oi` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` GROUP BY `p` . `category` , `p` . `id` , `p` . `name` HAVING `qty_sold` > ? ORDER BY `revenue` DESC LIMIT ?",4566,85.193436616,0.018658220897065265,30850390,162304,1
"SELECT `p` . `category` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `revenue` FROM `order_items` `oi` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` JOIN `orders` `o` ON `o` . `id` = `oi` . `order_id` WHERE `o` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY GROUP BY `p` . `category` ORDER BY `revenue` DESC",4478,76.014931789,0.01697519691581063,46999684,22390,1
"SELECT `u` . `city` , AVG ( `s` . `duration` ) AS `avg_duration` FROM `users` `u` JOIN `sessions` `s` ON `s` . `user_id` = `u` . `id` GROUP BY `u` . `city` ORDER BY `avg_duration` DESC LIMIT ?",4494,52.158478719,0.011606248046061415,27399918,35952,1
"SELECT `u` . `id` AS `user_id` , `u` . `city` , COUNT ( DISTINCTROW `o` . `id` ) AS `nb_orders` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `revenue` , AVG ( `s` . `duration` ) AS `avg_session_duration` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` JOIN `sessions` `s` ON `s` . `user_id` = `u` . `id` WHERE `s` . `duration` > ? AND `s` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY GROUP BY `u` . `id` , `u` . `city` ORDER BY `revenue` DESC , `avg_session_duration` DESC LIMIT ?",1661,46.729351827,0.028133264194461167,36964733,432611,1
SELECT * FROM `users` `u` WHERE ( SELECT SUM ( `o` . `total_amount` ) FROM `orders` `o` WHERE `o` . `user_id` = `u` . `id` AND `o` . `status` = ? ) > ? ORDER BY `u` . `created_at` DESC LIMIT ?,4584,42.324505335,0.009233094532068064,17569417,150217,1
"SELECT `u` . `id` AS `user_id` , `u` . `city` AS `city` , COUNT ( DISTINCTROW `o` . `id` ) AS `nb_orders` , SUM ( `oi` . `quantity` ) AS `total_items` , SUM ( `oi` . `quantity` * `oi` . `unit_price` ) AS `total_spent` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` WHERE `o` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY GROUP BY `u` . `id` , `u` . `city` HAVING `total_items` > ? ORDER BY `total_spent` DESC LIMIT ?",1606,41.436438834,0.025801020444582812,32102200,621503,1
"SELECT `session_type` , COUNT ( * ) AS `nb` FROM `sessions` GROUP BY `session_type`",10381,38.835938488,0.0037410594825161353,47223169,31143,1
SELECT * FROM `users` WHERE `id` NOT IN ( SELECT DISTINCTROW `user_id` FROM `sessions` ),10442,34.723859512,0.0033254031327331927,32161360,0,1
"SELECT `p` . `category` , SUM ( `oi` . `quantity` ) FROM `products` `p` JOIN `order_items` `oi` ON `p` . `id` = `oi` . `product_id` GROUP BY `p` . `category`",2248,29.436619387,0.013094581577846976,15108808,11240,1
"SELECT `u` . `city` , AVG ( `s` . `duration` ) FROM `users` `u` JOIN `sessions` `s` ON `u` . `id` = `s` . `user_id` GROUP BY `u` . `city`",2294,26.831069959,0.011696194402353968,13968166,18352,1
SELECT * FROM `sessions` WHERE DATE ( `created_at` ) = DATE (?) ORDER BY `duration` DESC,10516,26.13283726,0.0024850548934956256,47837284,0,1
"SELECT `session_type` , `device` , COUNT ( * ) AS `nb` FROM `sessions` GROUP BY `session_type` , `device` ORDER BY `nb` DESC",4491,25.446705019,0.005666155648853262,20469978,40419,1
SELECT * FROM `sessions` ORDER BY `created_at` DESC LIMIT ?,4556,24.184893111,0.005308361086698858,41450488,20725244,1
"SELECT `u` . `id` , `u` . `city` , `s` . `duration` FROM `users` `u` JOIN `sessions` `s` ON `u` . `id` = `s` . `user_id` WHERE `u` . `city` = ? ORDER BY `s` . `duration` DESC LIMIT ?",10241,22.234686442,0.002171144072063275,21879960,913300,1
"SELECT `u` . `id` AS `user_id` , `u` . `city` , COUNT ( DISTINCTROW `o` . `id` ) AS `nb_orders` , SUM ( `oi` . `quantity` ) AS `total_qty` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` JOIN `order_items` `oi` ON `oi` . `order_id` = `o` . `id` JOIN `products` `p` ON `p` . `id` = `oi` . `product_id` WHERE `p` . `category` = ? AND NOT EXISTS ( SELECT ? FROM `sessions` `s` WHERE `s` . `user_id` = `u` . `id` AND `s` . `session_type` = ? ) GROUP BY `u` . `id` , `u` . `city` HAVING `total_qty` > ? ORDER BY `total_qty` DESC LIMIT ?",1709,21.050702473,0.012317555572264483,12395017,74836,1
"SELECT `u` . `id` , `u` . `name` , `u` . `city` , `s` . `duration` , `s` . `session_type` FROM `users` `u` JOIN `sessions` `s` ON `u` . `id` = `s` . `user_id` WHERE `s` . `duration` > ? ORDER BY `s` . `duration` DESC",10296,20.506012519,0.0019916484575563326,46836504,0,1
"SELECT `t` . `city` , `t` . `user_id` , `t` . `total_spent` FROM ( SELECT `u` . `city` , `u` . `id` AS `user_id` , SUM ( `o` . `total_amount` ) AS `total_spent` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` GROUP BY `u` . `city` , `u` . `id` ) AS `t` JOIN ( SELECT `city` , MAX ( `total_spent` ) AS `max_spent` FROM ( SELECT `u` . `city` , `u` . `id` , SUM ( `o` . `total_amount` ) AS `total_spent` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` GROUP BY `u` . `city` , `u` . `id` ) AS `inner_t` GROUP BY `city` ) AS `m` ON `t` . `city` = `m` . `city` AND `t` . `total_spent` = `m` . `max_spent` ORDER BY `t` . `total_spent` DESC",1705,20.160122397,0.011824118707917889,3849890,13640,1
SELECT * FROM `users` `u` WHERE `u` . `id` IN ( SELECT `o` . `user_id` FROM `orders` `o` WHERE `o` . `id` IN ( SELECT `oi` . `order_id` FROM `order_items` `oi` WHERE `oi` . `product_id` IN ( SELECT `p` . `id` FROM `products` `p` WHERE `p` . `price` > ? ) ) ) ORDER BY `u` . `created_at` DESC LIMIT ?,1698,19.551297924,0.011514309731448763,16647192,1698000,1
"SELECT * FROM ( SELECT `u` . `id` AS `user_id` , `u` . `city` , ( SELECT SUM ( `o2` . `total_amount` ) FROM `orders` `o2` WHERE `o2` . `user_id` = `u` . `id` AND `o2` . `status` = ? ) AS `paid_revenue` FROM `users` `u` ) AS `t` WHERE `t` . `paid_revenue` IS NOT NULL AND `t` . `paid_revenue` > ? ORDER BY `t` . `paid_revenue` DESC LIMIT ?",1754,17.571055854,0.01001770573204105,6725249,60049,1
SELECT * FROM `products` ORDER BY NAME DESC,10533,16.054306692,0.0015241912742808316,21066000,10533000,1
SELECT `u` . * FROM `users` `u` WHERE `u` . `city` LIKE ? AND `u` . `id` IN ( SELECT `s` . `user_id` FROM `sessions` `s` WHERE `s` . `duration` > ? ) ORDER BY `u` . `created_at` DESC LIMIT ?,4540,15.77588194,0.0034748638634361233,11611774,1385387,0
"SELECT `u` . `city` , COUNT ( * ) FROM `users` `u` JOIN `sessions` `s` ON `u` . `id` = `s` . `user_id` GROUP BY `u` . `city`",2264,15.767852117,0.006964598991607774,13785496,18112,1
SELECT * FROM `users` `u` WHERE `u` . `id` IN ( SELECT DISTINCTROW `s` . `user_id` FROM `sessions` `s` WHERE `s` . `duration` > ? AND `s` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY ) ORDER BY `u` . `created_at` DESC LIMIT ?,4457,15.263960611,0.0034247163138882656,25195319,1639174,1
"SELECT `user_id` , AVG ( `duration` ) FROM `sessions` GROUP BY `user_id`",2327,14.510834837,0.006235855108293941,10585523,3583580,1
"SELECT `u` . `id` AS `user_id` , `u` . `city` , SUM ( `o` . `total_amount` ) AS `total_spent` , COUNT ( `o` . `id` ) AS `nb_orders` FROM `users` `u` JOIN `orders` `o` ON `o` . `user_id` = `u` . `id` WHERE `o` . `status` = ? GROUP BY `u` . `id` , `u` . `city` HAVING `total_spent` > ? ORDER BY `total_spent` DESC LIMIT ?",4449,14.330850821,0.003221139766464374,13765308,311532,0
SELECT * FROM `users` WHERE `LOWER` ( `city` ) = `LOWER` (?) ORDER BY `id` DESC,10522,14.225665198,0.0013519925107394032,16203880,1797586,0
SELECT `user_id` FROM `sessions` GROUP BY `user_id` HAVING AVG ( `duration` ) > ?,2295,13.353387,0.0058184692810457515,10439955,1895670,1
SELECT * FROM `sessions` ORDER BY `duration`,2316,12.597131775,0.00543917606865285,21070968,10535484,1
SELECT * FROM `sessions` ORDER BY `created_at`,2320,12.209730275,0.0052628147737068965,21107360,10553680,1
SELECT * FROM `users` WHERE NAME LIKE ? ORDER BY `created_at` DESC,10471,12.107807909,0.0011563182035144684,16125340,0,0
"SELECT `id` , NAME , `age` , `city` FROM `users` WHERE `age` BETWEEN ? AND ? ORDER BY `created_at` DESC LIMIT ?",10445,11.436902419,0.0010949643292484444,17129800,1044500,0
SELECT * FROM `users` `u` WHERE `u` . `id` IN ( SELECT `user_id` FROM `sessions` ),2328,10.146882412,0.004358626465635738,7170240,3585120,0
"SELECT `u` . `id` AS `user_id` , `u` . `city` , COUNT ( `s` . `id` ) AS `nb_sessions` FROM `users` `u` JOIN `sessions` `s` ON `s` . `user_id` = `u` . `id` WHERE `s` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY AND `u` . `city` = ? GROUP BY `u` . `id` , `u` . `city` HAVING `nb_sessions` > ? ORDER BY `nb_sessions` DESC LIMIT ?",4470,9.490414921,0.002123135329082774,9137700,0,0
"SELECT `o` . `id` AS `order_id` , `o` . `status` , `o` . `total_amount` , `o` . `created_at` , `u` . `city` FROM `orders` `o` JOIN `users` `u` ON `u` . `id` = `o` . `user_id` WHERE `u` . `city` = ? ORDER BY `o` . `created_at` DESC LIMIT ?",4499,9.19495443,0.0020437773794176484,9167918,1119729,0
"SELECT `session_type` , COUNT ( * ) FROM `sessions` GROUP BY `session_type`",2313,8.667516317,0.003747304936013835,10521837,6939,0
"SELECT `device` , COUNT ( * ) FROM `sessions` GROUP BY `device`",2241,8.494888055,0.003790668476126729,10194309,6723,0
SELECT `u` . * FROM `users` `u` WHERE EXISTS ( SELECT ? FROM `sessions` `s` WHERE `s` . `user_id` = `u` . `id` AND `s` . `duration` > ? AND `s` . `created_at` >= NOW ( ) - INTERVAL ? SQL_TSI_DAY ) AND NOT EXISTS ( SELECT ? FROM `orders` `o` WHERE `o` . `user_id` = `u` . `id` ) ORDER BY `u` . `created_at` DESC LIMIT ?,1712,8.470386519,0.004947655676985981,11124734,304487,0
"SELECT `DATE_FORMAT` ( `created_at` , ? ) AS SQL_TSI_MONTH , COUNT ( * ) AS `nb_orders` , SUM ( `total_amount` ) AS `total_revenue` FROM `orders` WHERE STATUS = ? GROUP BY SQL_TSI_MONTH ORDER BY SQL_TSI_MONTH DESC LIMIT ?",4472,8.451351524,0.0018898371028622542,10120136,13416,0
SELECT * FROM `users` WHERE `city` LIKE ? OR NAME LIKE ? ORDER BY `created_at` DESC LIMIT ?,4494,8.113357835,0.001805375575211393,9354681,2433921,0
"SELECT `user_id` , SUM ( `total_amount` ) FROM `orders` GROUP BY `user_id`",2281,7.796516037,0.003418025443665059,5155060,2566125,0
"SELECT `id` , NAME , `price` FROM `products` WHERE `category` = ? ORDER BY `price` ASC LIMIT ?",10281,7.46415324,0.0007260143215640502,10281000,0,0
SELECT `u` . `id` FROM `users` `u` WHERE EXISTS ( SELECT ? FROM `sessions` `s` WHERE `s` . `user_id` = `u` . `id` ),2285,7.160425606,0.003133665473085339,7037800,3518900,0
SELECT * FROM `users` WHERE `city` = ? ORDER BY `id` DESC LIMIT ?,10302,7.056147125,0.0006849298315860997,5497741,455400,0
SELECT * FROM `orders` ORDER BY `total_amount`,2281,6.177019043,0.002708031145550197,10310120,5155060,0
SELECT `u` . * FROM `users` `u` WHERE `u` . `city` LIKE ? AND EXISTS ( SELECT ? FROM `orders` `o` WHERE `o` . `user_id` = `u` . `id` AND `o` . `status` = ? ) AND `u` . `id` NOT IN ( SELECT `s` . `user_id` FROM `sessions` `s` WHERE `s` . `session_type` = ? ) ORDER BY `u` . `created_at` DESC LIMIT ?,1695,5.760181779,0.003398337332743363,5719585,86811,0
SELECT `p` . `id` FROM `products` `p` WHERE `p` . `id` NOT IN ( SELECT `product_id` FROM `order_items` ),2276,5.567749936,0.002446287318101933,4549724,2276,0
SELECT * FROM `orders` WHERE `total_amount` > ( SELECT AVG ( `total_amount` ) FROM `orders` ),2191,5.386446311,0.0024584419493382014,9903320,2234820,0
"SELECT `id` , NAME , `age` , `city` FROM `users` WHERE `age` BETWEEN ? AND ? ORDER BY `age` ASC LIMIT ?",4517,5.073274558,0.0011231513300863404,8859366,1903186,0
SELECT `u` . * FROM `users` `u` WHERE ( `u` . `name` LIKE ? OR `u` . `email` LIKE ? ) AND `u` . `id` IN ( SELECT `o` . `user_id` FROM `orders` `o` GROUP BY `o` . `user_id` HAVING SUM ( `o` . `total_amount` ) > ? ) ORDER BY `u` . `created_at` DESC LIMIT ?,1689,4.985506355,0.0029517503582001184,2866814,265754,0
SELECT * FROM `users` ORDER BY `created_at`,2332,4.836424111,0.0020739382980274443,7182560,3591280,0
SELECT * FROM `users` ORDER BY `age`,2341,4.767332155,0.002036451155489107,7210280,3605140,0
"SELECT STATUS , COUNT ( * ) FROM `orders` GROUP BY STATUS",2321,4.698736807,0.0020244449836277468,5245460,6963,0
SELECT * FROM `users` WHERE `age` > ? ORDER BY `age`,2294,4.299545742,0.0018742570802092414,6184624,2651864,0
SELECT * FROM `orders` WHERE `user_id` = ? ORDER BY `created_at` DESC LIMIT ?,10347,3.924258231,0.0003792653166135111,11488,5744,0
SELECT * FROM `sessions` WHERE `user_id` = ? ORDER BY `created_at` DESC LIMIT ?,10207,3.883603399,0.0003804843145880278,23918,11959,0
"SELECT `city` , COUNT ( * ) FROM `users` GROUP BY `city`",2302,3.465077411,0.0015052464860990443,3545080,18416,0
SELECT `city` FROM `users` GROUP BY `city` HAVING COUNT ( * ) > ?,2276,3.454792441,0.0015179228651142353,3505040,18208,0
SELECT `city` FROM `users` ORDER BY `city` DESC,2369,3.328762089,0.0014051338493035034,7296520,3648260,0
SELECT `city` FROM `users` ORDER BY `city`,2348,3.181724474,0.001355078566439523,7231840,3615920,0
SELECT DISTINCTROW `city` FROM `users`,2256,2.616034476,0.00115958975,3474240,18048,0
SELECT `id` FROM `users`,2285,1.491946857,0.000652930790809628,3518900,3518900,0
SELECT COUNT ( * ) FROM `users`,2268,1.249386635,0.0005508759413580247,0,2268,0
"SELECT `DIGEST_TEXT` , `COUNT_STAR` AS `exec_count` , `SUM_TIMER_WAIT` / ? AS `total_time_s` , `IFNULL` ( `SUM_TIMER_WAIT` / `NULLIF` ( `COUNT_STAR` , ? ) , ? ) / ? AS `avg_time_s` , `SUM_ROWS_EXAMINED` AS `rows_examined` , `SUM_ROWS_SENT` AS `rows_sent` FROM `performance_schema` . `events_statements_summary_by_digest` WHERE `DIGEST_TEXT` IS NOT NULL ORDER BY `SUM_TIMER_WAIT` DESC LIMIT ?",1,0.013599203,0.013599203,116,58,1
SET NAMES ? COLLATE ?,4,0.001093623,0.00027340575,0,0,0
SET `autocommit` = ?,4,0.000569612,0.000142403,0,0,0
